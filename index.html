<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sitemap URLs</title>
</head>
<body>
    <div id="count"></div>
    <div id="urlList"></div>

    <script>
        async function loadSitemapUrls() {
            try {
                // 首先获取主站点地图
                const indexResponse = await fetch('/sitemap.xml');
                const indexText = await indexResponse.text();
                const parser = new DOMParser();
                const indexDoc = parser.parseFromString(indexText, 'text/xml');
                
                // 获取所有子站点地图的URL
                const sitemapUrls = Array.from(indexDoc.getElementsByTagName('loc')).map(loc => loc.textContent);
                
                let allUrls = [];
                
                // 获取每个子站点地图中的URL
                for (const sitemapUrl of sitemapUrls) {
                    const response = await fetch(sitemapUrl);
                    const text = await response.text();
                    const doc = parser.parseFromString(text, 'text/xml');
                    const urls = Array.from(doc.getElementsByTagName('loc')).map(loc => loc.textContent);
                    allUrls = allUrls.concat(urls);
                }
                
                // 显示总数
                document.getElementById('count').textContent = `总URL数量: ${allUrls.length}`;
                
                // 显示所有URL
                const urlListHtml = allUrls.map(url => `<a href="${url}">${url}</a><br>`).join('');
                document.getElementById('urlList').innerHTML = urlListHtml;
                
            } catch (error) {
                console.error('加载站点地图失败:', error);
                document.getElementById('urlList').textContent = '加载失败: ' + error.message;
            }
        }

        loadSitemapUrls();
    </script>
</body>
</html>